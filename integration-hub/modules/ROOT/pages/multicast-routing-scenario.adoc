= Multicast Routing Scenario 


In this scenario, an application *ApplicationA* that when it sends a payload Document Q, we want to send that payload to 3 other apps, ApplicationB, ApplicationC, and ApplicationD. 2 of the apps ApplicationB and ApplicationC want the un-mapped payload, and 1 app ApplicationD wants to map the payload to DocumentP before it gets there.


=== Relationships

There are seven xref:glossary#sectr[Relationships] in this scenario:

.Override Routing Scenario Relationships
[cols="3*"]

|===
|Relationship|Description|Contains

s|A : Any 
|Universal relationship between Application *A* and any other Application
|Contains artifacts 

s|B : Any
|Universal relationship between Application *B* and any other Application
|Contains artifacts

s|C : Any
|Universal relationship between Application *C* and any other Application
|Contains artifacts 

s|D : Any
|Universal relationship between Application *D* and any other Application
|Contains artifacts 

s|A : B
|The relationship between Application *A* and Application *B*. 
|Contains artifacts used only between these applications.

s|A : C
|The relationship between Application *A* and Application *C*. 
|Contains artifacts used only between these applications.

s|A : D
|The relationship between Application *A* and Application *D*. 
|Contains artifacts used only between these applications.

|===


== Artifacts and Artifact Configuration 

This tables and flow diagrams in this section identifies:

* Artifacts that must be configured in order for a given document to be routed (that is, not rejected)
* The Relationship in which the artifacts are configured

=== A : Any

|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#secte[Endpoint]
s|RecFromA
|Endpoint on which you expect to receive documents from Application *A*
|xref:endpoints[Endpoints] 

|xref:glossary#sectd[Document Type]
s|Y
|Document Type you expect to receive from an application
|xref:document-types[Document Types]

|xref:glossary#sects[Source Channel]
s|Y-Passthrough
|Source channel that passes Document Type *Y* to whatever Target channel is selected
|xref:channels[Channels] 

|===

=== B : Any

|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#secte[Endpoint]
s|B
|Endpoint from which documents are sent to *B*.
|xref:endpoints[Endpoints] 
|===

=== C : Any

|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#secte[Endpoint]
s|C
|Endpoint from which documents are sent to *C*.
|xref:endpoints[Endpoints] 
|===

=== D : Any


|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#secte[Endpoint]
s|D
|Endpoint from which documents are sent to *D*.
|xref:endpoints[Endpoints] 

|xref:glossary#sectd[Document Type]
s|Z
|Document Type that *D* wants to receive
|xref:document-types[Document Types]
|===


==== A : B

|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#sectt[Target Channel]
s|Q-to-B
|
Target channel that passes documents of Document Type *Y* to ApplicationB's Endpoint
|xref:channels[Channels] 

|xref:glossary#sectt[Transaction]
s|Y-Passthrough-to-B
|Combination of  Source Channel *Y-Passthrough* and Target Channel *Y-to-AppB*. 
When combined (with ?) it becomes a transaction that receives a document Y and then sends it to the endpoint *B*. This transaction has the From Partner set to ApplicationA and the To Partner set to ApplicationB.
|xref:transaction-designer[Transaction Designer] 

|===




==== Artifacts in A : C

|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#sectt[Target Channel]
s|Q-to-C
|Target channel that passes documents of Document Type *Y* to ApplicationB's Endpoint
|xref:channels[Channels] 

|xref:glossary#sectt[Transaction]
s|Y-Passthrough-to-C
|Combination of the Source Channel *Y-Passthrough* and the Target Channel *Y-to-C*. When combined (with ?) it becomes a transaction that receives a document of Document Type *Q* and then sends it to the endpoint AppC. Has the From Partner set to ApplicationA and the To Partner set to ApplicationC.
|xref:transaction-designer[Transaction Designer] 

|===



==== AppA : AppD


|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#sectm[Map]
s|Y-to-Z
|Convert the documents of Document Type *Y* into documents of Document Type *X*
Target channel that passes documents of Document Type *Y* to ApplicationB's Endpoint
|xref:maps[Maps] 

|xref:glossary#sectt[Transaction]
s|Y-to-Z-to-D
|This transaction is the combination of the Source Channel Q-Passthrough and the Target Channel Q-to-P-to-AppD. And when combined it will be a transaction that receives a document Q, maps it to Document P and then sends it to the endpoint AppD. This transaction has the From Partner set to ApplicationA and the To Partner set to ApplicationD.

|xref:transaction-designer[Transaction Designer] 

|===

== Outcomes

=== Application A sends Document Q to Endpoint RecFromA.

* Integration Manager:

** Receives Document Q on Endpoint RecFromA

** Attempts to resolve routes
** Finds 3 Transactions DocQ-Passthrough-to-AppB, DocQ-Passthrough-to-AppC, and DocQ-to-DocP-to-AppD
** Executes all transactions, 

*** One sends Document Q to Endpoint AppB.

*** One sends Document Q to Endpoint AppC.

*** One maps Document Q to Document P and sends it to the Endpoint AppD.


= Content below is for cutting and pasting purposes only


































































In this scenario, your organization expects to receive xref:glossary#sectd[document]s of a single xref:glossary#sectd[Document Type] from multiple xref:glossary#sectp[Partner]s. 
However, 

as in the xref:basic-routing-scenario.adoc[Basic Routing Scenario].

If IH has been configured to receive a document of this xref:glossary#sectd[Document Type], IH routes the document to an internal API. 
If IH has not been configured to receive a document of this Document Type, IH rejects the document. 


=== Relationships

There are x xref:glossary#sectr[Relationships] in this scenario:

.Override Routing Scenario Relationships
[cols="3*"]

|===
|Relationship|Description|Contains

|YourCompany B2B : Any 
|Universal relationship between any partner and your company
|Contains Artifacts used across all partners with whom you do business

|YourCompany B2B : PartA 
|Your organization's relationship with the partner with whom you are doing business (in this case, *PartA*)
|Contains artifacts used only with this partner

|YourCompany B2B : PartB
|Your organization's relationship with *PartB*
|Contains artifacts used only with *PartB*

|YourCompany B2B : PartC
|Your organization's relationship with *PartC*
|Contains artifacts used only with *PartC*

|===


[[img-override-routing-scenario-artifacts]]

image::override-routing-scenario-artifacts.png[img-override-scenario-artifacts, title="Override Routing Scenario Artifacts"]


=== Artifacts and Artifact Configuration 

This section identifies:

* Artifacts that must be configured in order for the document in this scenario to be routed (that is, not rejected)
* The Relationship (either *YourCompany B2B : Any* or *YourCompany B2B : PartA*) in which the artifacts are configured


//==== Configured in *YourCompany B2B : Any*

.Override Routing Scenario Artifacts - YourCompany B2B : Any
[cols="4*"]

|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#sectd[Document Type]
|*DocTypeY*
|Document Type you use internally in your company
|xref:document-types[Document Types]

|xref:glossary#sectd[Document Type]
|*DocTypeX*
|Document Type you use internally in your company
|xref:document-types[Document Types]

|xref:glossary#sectm[Map]
|*Map X-to-Y*
|Transforms a document of Document Type DocTypeX to a document of Document Type DocTypeY
|xref:maps[Maps]

|xref:glossary#sects[Source Channel ]
|DocX-to-DocY
|Channel that  a recieved document Q into the document C
|xref:channels[Channels] 


|xref:glossary#secte[Endpoint]
|*API*
|Endpoint that points to an internal API
|xref:endpoints[Endpoints] 

|xref:glossary#sectt[Target Channel ]
|*Y-to-API*
|Channel that sends a document of the internal Document Type *DocTypeY* to Endpoint *API*
|xref:channels[Channels] 

|===

//==== Configured in YourCompany B2B : PartA

.Override Routing Scenario Artifacts - YourCompany B2B : PartA

[cols="2, 2, 6, 2"]
|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#secte[Endpoint]
|*RecFromA*
|Endpoint that points to an internal API
|xref:endpoints[Endpoints] 

|xref:glossary#sect[Transaction] 
|*X-to-Y-to-API*
|Combination of the Source Channel *DocTypeX-to-DocTypeY* and the Target Channel *DocTypeX-to-API*.
It receives a document of *DocTypeX*, maps it to a document of *DocTypeY* and then sends it to Endpoint *API*. In this Transaction, the *From* Partner is configured as *PartA* and the *To* Partner as *YourCompany B2B*.
|xref:transaction-designer[Transaction Designer] 

|===


// ==== Configured in YourCompany B2B : PartB

.Override Routing Scenario Artifacts - YourCompany B2B : PartB
[cols="2, 2, 6, 2"]

|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#secte[Endpoint]
|*RecFromB*
|Endpoint that points to an internal API
|xref:endpoints[Endpoints] 

|xref:glossary#sect[Transaction] 
|*X-to-Y-to-API*
|Combination of the Source Channel *DocTypeX-to-DocTypeY* and the Target Channel *DocTypeX-to-API*.
It receives a document of *DocTypeX*, maps it to a document of *DocTypeY* and then sends it to Endpoint *API*. In this Transaction, the *From* Partner is configured as *PartB* and the *To* Partner as *YourCompany B2B*.
|xref:transaction-designer[Transaction Designer] 

|===


//==== Configured in YourCompany B2B : PartC

.Override Routing Scenario Artifacts - YourCompany B2B : PartC

[cols="2, 2, 6, 2"]
|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#secte[Endpoint]
|*RecFromC*
|Endpoint that points to an internal API
|xref:endpoints[Endpoints] 

|xref:glossary#sectd[Document Type]
|*DocTypeX'*
|Document Type you expect to receive from this partner that is a variation on the standard for this Document Type. 
|xref:document-types[Document Types] 

|xref:glossary#sects[Source Channel]
|*DocTypeX'-to-DocTypeY*
|Maps *DocTypeQ'* to *DocTypeY*
|xref:channels[Channels] 

|xref:glossary#sect[Transaction] 
|*X'-to-Y-to-API*
|Combination of the Source Channel *DocTypeX-to-DocTypeY* and the Target Channel *DocTypeY-to-API*.
It receives a document of *DocTypeX'*, maps it to a document of *DocTypeY* and then sends it to Endpoint *API*. In this Transaction, the *From* Partner is configured as *PartC* and the *To* Partner as *YourCompany B2B*.
|xref:transaction-designer[Transaction Designer] 

|===


=== Outcomes

The outcome of this scenario depends on whether the following artifacts are configured appropriately:

* Partner *PartA*
* Partner *PartB*
* Partner *PartC*
* Document Type *DocTypeX*
* Document Type *DocTypeX'*
* Document Type *DocTypeY*
* Endpoint *RecFromA*
* Endpoint *RecFromB*
* Endpoint *RecFromC*
* Endpoint *API*
* Map *X-to-Y*
* Map *X'-to-Y*
* Source Channel *X-to-Y*
* Source Channel *X'-to-Y*
* Target Channel *Y-to-API*
* Transaction *X-to-Y-to-API*
* Transaction *X'-to-Y-to-API*

=== Outcomes

==== PartA sends Document X to Endpoint RecFromA.
* Integration Manager:

** Receives Document Q

** Attempts to resolve routes
** Finds Transaction DocQ-to-DocC-to-DATA
** Executes that transaction, which maps the transaction to Document C

**  Sends Document C to Endpoint DATA.

[[img-override-scenario-outcome]]

image::override-routing-scenario-outcome-success.png[img-override-routing-scenario-outcome-success, title="Override Routing Scenario Outcome (Success)"]

==== PartB sends Document X to Endpoint RecFromB.

* Integration Manager:

** Receives Document Q

** Attempts to resolve routes
** Finds Transaction DocQ-to-DocC-to-DATA
** Executes that transaction, which maps the transaction to Document C

**  Sends Document C to Endpoint DATA.

[[img-override-scenario-outcome]]

image::override-routing-scenario-outcome-success.png[img-override-routing-scenario-outcome-success, title="Override Routing Scenario Outcome (Success)"]

==== PartC sends Document X' to Endpoint RecFromC

Integration Manager:

** Receives Document X'

** Attempts to resolve routes
** Finds Transaction DocX'-to-DocY-to-API
** Executes that transaction, which maps the transaction to Document Y

**  Sends Document Y to Endpoint API.

[[img-override-scenario-outcome]]

image::override-routing-scenario-outcome-success.png[img-override-routing-scenario-outcome-success, title="Override Routing Scenario Outcome (Success)"]


==== Outcome: Document Rejected

Partner *PartA* sends a document of Document Type *DocTypeZ* to Endpoint *RecFromA*. 
Document Type *DocTypeZ* is not configured in Relationship *YourCompany B2B : Any*; IH rejects the document. 

Integration Hub:

* Receives incoming document.
* Attempts to resolve Routes.
* Does not find a corresponding Transaction.
* Rejects the document.

[[img-basic-scenario-outcome-rejection]]

image::basic-scenario-outcome-rejection.png[img-basic-scenario-outcome-rejection, title="Basic Scenario Outcome (Rejection)"]

