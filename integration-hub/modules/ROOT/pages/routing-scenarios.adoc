= Routing Scenarios

This page presents scenarios that identify and illustrate:

* Integration Hub (IH) artifacts
* How you can configure IH artifacts to implement routing objectives.

== Basic Scenario

In this scenario, your organization receives a xref:glossary#sectd[document] from a xref:glossary#sectp[Partner]. 
If IH has been configured to receive a document of this xref:glossary#sectd[Document Type], IH routes the document to an internal API. 
If IH has not been configured to receive a document of this Document Type, IH rejects the document. 


=== Relationships

There are two xref:glossary#sectr[Relationships] in this scenario:

YourCompany B2B : Any::
* Universal B2B Relationship between your organization and any Partner.
* Contains artifacts used across all partners with whom you do business.
YourCompany B2B : *PartA*::
* Your organization's Relationship with the Partner with whom you are doing business (*PartA* in this scenario).
* Contains artifacts used only with this Partner.

[[img-basic-scenario-artifacts]]

image::basic-scenario-artifacts.png[img-basic-scenario-artifacts, title="Basic Scenario Artifacts"]


=== Artifacts and Artifact Configuration 

This section identifies:

* Artifacts that must be configured in order for the document in this scenario to be routed (that is, not rejected)
* The Relationship (either *YourCompany B2B : Any* or *YourCompany B2B : PartA*) in which the artifacts are configured

==== Configured in *YourCompany B2B : Any*

* Document Type *DocTypeC*

** Document Type you use internally in your company
** Configured in xref:document-types[Document Types]  

* Endpoint *API*
** Endpoint that points to an internal API
** Configured in xref:endpoints[Endpoints] 

* Target Channel *C-to-API*
** Channel that sends a document of the internal Document Type *DocTypeC* to Endpoint *API*
** Configured in xref:channels[Channels] 


==== Configured in YourCompany B2B : PartA

* Endpoint *RecFromA*
** Endpoint at which you expect to receive documents from *PartA*

* Document Type *DocTypeQ*
** Document Type that includes a document you expect to receive from *PartA*

* Map *Q-to-C*
** Transforms a document of Document Type *DocTypeQ* to a document of Document Type *DocTypeC*
** Configured in xref:maps[Maps]


* Source Channel Q-to-C

** Includes the process that maps and sends a document of *DocTypeQ* to a document of *DocTypeC*

* Transaction Q-to-C-to-API

** This xref:glossary#sectt[Transaction] is the combination of the Source Channel *Q-to-C* and the Target Channel *C-to-API*.
It receives a document of *DocTypeQ*, maps it to a document of *DocTypeC* and then sends it to Endpoint *API*. 
** This transaction has the *From* Partner set to *PartA* and the *To* Partner set to *Your Company B2B*.


=== Outcome

Having read this far, you now know that the outcome of this scenario depends on whether you have configured the following artifacts appropriately:

* Partner *PartA*
* Document Type *DocTypeQ*
* Document Type *DocTypeC*
* Endpoint *RecFromA*
* Endpoint *API*
* Target Channel *C-to-API*
* Source Channel *Q-to-C*
* Transaction *Q-to-C-to-API*





==== Document Accepted and Routed

All artifacts are correctly configured; IH routes an incoming document of *DocTypeQ* from Partner *PartA* to Endpoint *RecFromA*.

Integration Hub:

* Receives a document of *DocTypeQ*.
* Attempts to resolve routes.
** Finds a Transaction *DocTypeQ-to-DocTypeC-to-API* that contains *DocTypeQ*.
* Executes Transaction *DocTypeQ-to-DocTypeC-to-API*, which transforms the document from *DocTypeQ* to *DocTypeC*.
* Sends the document to Endpoint *API*.

[[img-basic-scenario-outcome-success]]

image::basic-scenario-outcome-success.png[img-basic-scenario-outcome-success, title="Basic Scenario Outcome (Success)"]


==== Document Rejected

Partner *Part* sends a document of Document Type *DocTypeP* to Endpoint *RecFromA*. 
Document Type *DocTypeP* is not configured in Relationship *YourCompany B2B : Any*; IH rejects the document. 

Integration Hub:

* Receives incoming document.
* Attempts to resolve Routes.
* Does not find a corresponding Transaction.
* Rejects the document.

[[img-basic-scenario-outcome-rejection]]

image::basic-scenario-outcome-rejection.png[img-basic-scenario-outcome-rejection, title="Basic Scenario Outcome (Rejection)"]

