= Routing Scenarios

This page presents scenarios that identify and illustrate:

* Integration Hub (IH) artifacts
* How you can configure IH artifacts to implement routing objectives.

== Basic Scenario

In this scenario, your organization receives a xref:glossary#sectd[document] from a xref:glossary#sectp[Partner]. 
If IH has been configured to receive a document of this xref:glossary#sectd[Document Type], IH routes the document to an internal database. 
If IH has not been configured to receive a document of this Document Type, IH rejects the document. 


=== Relationships

There are two xref:glossary#sectr[Relationships] in this scenario:

YourCompany B2B:Any::
* Universal Relationship between your organization and any Partner.
* Contains artifacts used across all partners with whom you do business.
*PartA*:YourCompany B2B::
* Your Relationship with the Partner with whom you are doing business (*PartA* in this scenario).
* Contains artifacts used only with this Partner.

[[img-basic-scenario-overview]]

image::basic-scenario-overview.png[img-basic-scenario-overview, title="Basic Scenario Overview"]


=== Artifacts and Artifact Configuration 

This section identifies:

* Artifacts that must be configured in order for the document in this scenario to be routed (that is, not rejected)
* The Relationship (either *YourCompany B2B:Any* or *PartA:YourCompany B2B*) in which the artifacts are configured

==== Configured in *YourCompany B2B:Any*

* Document Type *DocTypeC*

** Document Type you use internally in your company
** Configured in xref:document-types[Document Types]  

* Endpoint *DATA*
** Endpoint that points to your internal database
** Configured in xref:endpoints[Endpoints] 

* Target Channel *C-to-Data*
** Channel that sends a document of the internal Document Type *DocTypeC* to Endpoint *DATA*
** Configured in xref:channels[Channels] 


==== Configured in PartA:YourCompany B2B

* Endpoint *RecFromA*
** Endpoint at which you expect to receive documents from *PartA*

* Document Type *DocTypeQ*
** Document Type that includes a document you expect to receive from *PartA*

* Map *Q-to-C*
** Transforms a document of Document Type *DocTypeQ* to a document of Document Type *DocTypeC*
** Configured in xref:maps[Maps]


* Source Channel Q-to-C

** Includes the process that maps and sends a document of *DocTypeQ* to a document of *DocTypeC*

* Transaction Q-to-C-to-Data

** This xref:glossary#sectt[Transaction] is the combination of the Source Channel *Q-to-C* and the Target Channel *C-to-Data*.
It receives a document of *DocTypeQ*, maps it to a document of *DocTypeC* and then sends it to Endpoint *DATA*. 
** This transaction has the *From* Partner set to *PartA* and the *To* Partner set to *Your Company B2B*.


=== Outcome

Having read this far, you now know that the outcome of this scenario depends on whether you have configured the following artifacts appropriately:

* Partner *PartA*
* Document Type *DocTypeQ*
* Document Type *DocTypeC*
* Endpoint *RecFromA*
* Endpoint *DATA*
* Target Channel *C-to-Data*
* Source Channel *Q-to-C*
* Transaction *Q-to-C-to-Data*





==== Document Accepted and Routed

All artifacts are correctly configured; IH routes *DocTypeQ* from *PartA* to Endpoint *RecFromA*.

Integration Hub:

* Receives a document of *DocTypeQ*.
* Attempts to resolve routes.
** Finds a Transaction *DocTypeQ-to-DocTypeC-to-DATA* that contains *DocTypeQ*.
* Executes Transaction *DocTypeQ-to-DocTypeC-to-DATA*, which transforms the document from *DocTypeQ* to *DocTypeC*.
* Sends the document to Endpoint *DATA*.

[[img-basic-scenario-execution-success]]

image::basic-scenario-execution-success.png[img-basic-scenario-execution-success, title="Basic Scenario Successful Execution"]


==== Document Rejected

Document Type *DocTypeC* is not configured in Relationship *YourCompany B2B:Any*; IH rejects an incoming document of Document Type *DocTypeC* from Partner *PartA*. 

Integration Hub:

* Receives incoming document.
* Attempts to resolve Routes.
* Does not find a corresponding Transaction.

* Rejects the Document.

[[img-basic-scenario-execution-rejection]]

image::basic-scenario-execution-rejection.png[img-basic-scenario-execution-rejection, title="Basic Scenario Execution (Rejection)"]

