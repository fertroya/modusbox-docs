= Routing Scenarios

== Basic Scenario

=== Goal

Here our users want to receive a single document *DocQ* from partner *PartA*, map it once to the internal standard document *DocC* and send it to a backend database *DATA*.

=== Setup

There are two relationships in this scenario:

[YourCompany B2B:Any]
* Universal relationship between your company and any partner.
* Artifacts used across all partners with whom you do business.
[*PartA*:YourCompany B2B]
* Your relationship with the partner with whom you are doing business (in this case, *PartA*).
* Contains artifacts used only with this partner.

[[img-basic-scenario-overview]]

image::basic-scenario-overview.png[img-basic-scenario-overview, title="Basic Scenario Overview"]


==== Artifacts in [YourCompany B2B:Any]

* *DocC*

** A document you use internally in your company.

* Endpoint *DATA*

** The endpoint that points to your internal database.

* Target Channel *DocC-to-Data*

** This channel will take the internal document C and send it to Endpoint Data.

==== [PartnerA:YourCompany B2B]

* Endpoint *RecFromA*

** This is the endpoint on which you expect to receive documents from *PartA*.

* *DocQ*

** A document you expect to receive from your partner.

* Map *Q-to-C*

** This map will convert *DocQ* into document C

* Source Channel DocQ-to-DocC

** This source channel will map the document Q into the document C

* Transaction DocQ-to-DocC-to-Data

** This transaction is the combination of the Source Channel DocQ-to-DocC and the Target Channel DocC-to-Data. And when combined it will be a transaction that receives a document Q maps it to document C and then sends it to the database DATA. This transaction has the From Partner set to PartA and the To Partner set to Your Company B2B.



=== Execution

==== ParnerA sends Document Q to Endpoint RecFromA.

Integration Hub:

* Receives Document Q

* Attempts to resolve routes
* Finds Transaction DocQ-to-DocC-to-DATA
* Executes that transaction, which maps the transaction to Document C

* Sends Document C to Endpoint DATA.

[[img-basic-scenario-execution-success]]

image::basic-scenario-execution-success.png[img-basic-scenario-execution-success, title="Basic Scenario Successful Execution"]




==== Partner PartA sends Document P to Endpoint RecFromA,.

Integration Hub:

* Receives document P

* Attempts to resolve routes

* Does not find a corresponding transaction.

* Rejects the document.

[[img-basic-scenario-execution-rejection]]

image::basic-scenario-execution-rejection.png[img-basic-scenario-execution-rejection, title="Basic Scenario Execution (Rejection)"]

