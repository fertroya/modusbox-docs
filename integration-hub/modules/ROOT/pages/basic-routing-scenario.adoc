= Basic Routing Scenario

In this scenario, your organization receives a xref:glossary#sectd[Document] from a xref:glossary#sectp[Partner]. 
If IHub has been configured to receive a document of this xref:glossary#sectd[Document Type], IHub routes the document to an internal API. 
If IHub has not been configured to receive a document of this Document Type, IHub rejects the document. 


== Actors

In this scenario, there are three xref:glossary#secta[Actor]s: 
    
* Partner A (configured as *PartA*)
* *_YourCompany_ B2B*
* *Any*

== Relationships

There are two xref:glossary#sectr[Relationships] in this scenario:

.Basic Routing Scenario Relationships
[cols="3*"]

|===
|Relationship|Description|Contains

s|_YourCompany_ B2B : Any
|Universal relationship between your company any actor
|Contains Artifacts used across all partners with whom you do business

s|_YourCompany_ B2B : PartA
|Your organization's relationship with the partner with whom you are doing business (in this case, *PartA*)
|Contains Artifacts used only with Partner *PartA*
|===


== Artifacts 

This section identifies:

* Artifacts that must be configured in order for the document in this scenario to be routed (that is, not rejected)
* The Relationship (either *_YourCompany_ B2B : Any* or *_YourCompany B2B_ : PartA*) in which the artifacts are configured

[[img-basic-routing-scenario-artifacts]]

image::basic-routing-scenario-artifacts.png[img-basic-routing-scenario-artifacts, title="Basic Routing Scenario Artifacts"]



//== Configured in *YourCompany B2B : Any*

.Basic Scenario Artifacts - *_YourCompany B2B_ : Any*
[cols="2, 2, 6, 2"]

|===
h|Artifact|Artifact Name|Description|Configured on page

h|xref:glossary#sectd[Document Type]
s|X
|Document Type you use internally in your company
|xref:document-types.adoc[Document Types]

h|xref:glossary#secte[Endpoint]
s|API
|Endpoint that points to an internal API
|xref:endpoints.adoc[Endpoints] 

h|xref:glossary#sectt[Target Channel]
s|X-to-API
|Channel that sends a document of the internal Document Type *X* to Endpoint *API*
|xref:channels.adoc[Channels] 

h|xref:glossary#secte[RecFromA]
s|API
|Endpoint from which you expect to receive documents from *PartA*. 
|xref:endpoints.adoc[Endpoints] 

h|xref:glossary#sectt[Transaction]
s|Y-to-X-to-API
|Combination of Source Channel *Y-to-X* and  Target Channel *X-to-API*.
It receives a document of Document Type *Y*, maps it to a document of Document Type *X* and then sends it to Endpoint *API*. 
In this Transaction, the From Partner is configured as *PartA* and the To Partner as *_YourCompany_ B2B*. 

|===

//== Configured in _YourCompany_ B2B : PartA

.Basic Scenario Artifacts - *_YourCompany_ B2B : PartA*

[cols="2, 2, 6, 2"]
|===
|Artifact|Artifact Name|Description|Configured on page

|xref:glossary#secte[Endpoint]
|*RecFromA*
|Endpoint at which you expect to receive documents from *PartA*
|xref:endpoints.adoc[Endpoints] 

|xref:glossary#sectd[Document Type]
|*Y*
|Document Type that includes a document you expect to receive from *PartA*
|xref:document-types.adoc[Document Types]

|xref:glossary#sectm[Map] 
|*Y-to-X*
|Transforms a document of Document Type *Y* to a document of Document Type *X*
|xref:maps.adoc[Maps]

|xref:glossary#sects[Source Channel]
|*Y-to-X*
|Includes the process that maps and sends a document of *Y* to a document of *X*
|xref:channels.adoc[Channels] 

|xref:glossary#sect[Transaction] 
|*Y-to-X-to-API*
|Combination of the Source Channel *Y-to-X* and the Target Channel *X-to-API*.
It receives a document of *Y*, maps it to a document of *X* and then sends it to Endpoint *API*. 
In this Transaction, the *From* Partner is configured as *PartA* and the *To* Partner as *YourCompany B2B*.
|xref:transaction-designer.adoc[Transaction Designer] 

|===

== Outcomes

If the artifacts in the previous section have been configured correctly, then document discussed above will be <<Document Accepted and Routed, accepted and routed>>. 

Otherwise, the document will be <<Document Rejected, rejected>>.



== Document Accepted and Routed

All artifacts are correctly configured; IHub routes an incoming document of Document Type *Y* from Partner *PartA* to Endpoint *RecFromA*.

[[img-basic-routing-scenario-outcome-success]]

image::basic-routing-scenario-outcome-success.png[img-basic-routing-scenario-outcome-success, title="Basic Routing Scenario Outcome (Success)"]

Integration Hub:

* Receives a document of Document Type *Y* from Endpoint *RecFromA*
* Attempts to resolve routes
** Finds a Transaction *Y-to-X-to-API* that contains Source Document Type of Document Type *Y*    
* Executes Transaction *Y-to-X-to-API*, which transforms the Document from Document Type *Y* to Document Type *X*
* Sends the document to Endpoint *API*.

== Document Rejected

Partner *PartA* sends a document of Document Type *Z* to Endpoint *RecFromA*. 
Document Type *Z* is not configured in Relationship *_YourCompany_ B2B : Any*; IHub rejects the document. 

[[img-basic-routing-scenario-outcome-rejection]]

image::basic-routing-scenario-outcome-rejection.png[img-basic-routing-scenario-outcome-rejection, title="Basic Routing Scenario Outcome (Rejection)"]

Integration Hub:

* Receives incoming document
* Attempts to resolve Routes
* Does not find a corresponding Transaction
* Rejects the document.



